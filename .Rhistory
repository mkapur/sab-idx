title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
# scale_color_manual(values = c(rep('blue',4),'gold2','gold','seagreen3','seagreen4','brown','grey22','grey44'))+
scale_color_manual( values = c(rep('blue',4),PNWColors::pnw_palette("Starfish")),
labels = c(custnames)) +
# scale_linetype_manual(values = c(rep('solid',4),
#                                  rep('dashed',40)),
#                       labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
# scale_color_manual(values = c(rep('blue',4),'gold2','gold','seagreen3','seagreen4','brown','grey22','grey44'))+
scale_color_manual( values = c(rep('blue',4),PNWColors::pnw_palette("Starfish")),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
PNWColors::pnw_palette("Starfish")
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
# scale_color_manual(values = c(rep('blue',4),'gold2','gold','seagreen3','seagreen4','brown','grey22','grey44'))+
scale_color_manual( values = c(rep('blue',4),PNWColors::pnw_palette("Starfish",8)),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
cbbPalette,
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
# scale_color_manual(values = c(rep('blue',4),'gold2','gold','seagreen3','seagreen4','brown','grey22','grey44'))+
scale_color_manual( values = c(rep('blue',4),
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
# scale_color_manual( values = c(rep('blue',4),
#                                cbbPalette),
#                     labels = c(custnames)) +
# scale_linetype_manual(values = c(rep('solid',4),
#                                  rep('dashed',40)),
# labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
scale_color_manual( values = c(rep('blue',3),
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
custnames <- c(paste0('VAST ',c('California Current','British Columbia',
'Gulf of Alaska','Aleutian_Islands', 'Eastern Bering Sea') ),
'AK Gulf Trawl', 'AK Domestic Longline', 'BC Offshore Standardized','BC Synoptic Trawl','BC Trap Stratified',
'Triennial','WCGBTS')[fleetSel]
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
scale_color_manual( values = c(rep('blue',3),
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
custnames <- c(paste0('VAST ',c('California Current','British Columbia',
'Aleutian_Islands', 'Gulf of Alaska','Eastern Bering Sea') ),
'AK Domestic Longline', 'BC Offshore Standardized','BC Synoptic Trawl','BC Trap Stratified',
'Triennial','WCGBTS')[fleetSel]
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
scale_color_manual( values = c(rep('blue',3),
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
scale_color_manual( values = c(rep('blue',3), 'dodgerblue',
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia","Gulf_of_Alaska",'Aleutian_Islands',"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
scale_color_manual( values = c(rep('blue',3), 'dodgerblue3',
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia",'Aleutian_Islands',"Gulf_of_Alaska","Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
scale_color_manual( values = c(rep('blue',3), 'dodgerblue3',
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
fleetSel
c("California_current","British_Columbia",
'Aleutian_Islands',"Gulf_of_Alaska",
"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',
"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia",
'Aleutian_Islands',"Gulf_of_Alaska",
"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',
"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019)
custnames
fleetSel
c(paste0('VAST ',c('California Current','British Columbia',
'Aleutian_Islands', 'Gulf of Alaska','Eastern Bering Sea') ),
'AK Domestic Longline', 'BC Offshore Standardized','BC Synoptic Trawl','BC Trap Stratified',
'Triennial','WCGBTS')[fleetSel]
custnames <- c(paste0('VAST ',c('California Current','British Columbia',
'Aleutian Islands', 'Gulf of Alaska','Eastern Bering Sea') ),
'AK Domestic Longline', "AK Gulf Trawl", 'BC Offshore Standardized','BC Synoptic Trawl','BC Trap Stratified',
'Triennial','WCGBTS')[fleetSel]
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia",
'Aleutian_Islands',"Gulf_of_Alaska",
"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',
"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
scale_color_manual( values = c(rep('blue',3), 'dodgerblue3',
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
ggsave(plot = last_plot(),
# file = paste0("./figures/",Sys.Date(),"_idx_comparison.png"),
file = paste0(DateFile,"/compare_all.png"),
height = 8, width = 12, unit='in',dpi = 320)
DateFile = "C:/Users/mkapur/Dropbox/UW/sab-idx/runs/2020-01-23_nx=500_Triennial_WCGBTS_BCs_BCo_AK_DOM_LL_GOA_baseQ=AK_DOM_LL1980_2018/"
## see line 81 here for conv https://github.com/James-Thorson-NOAA/FishStatsUtils/blob/master/R/plot_index.R
vastc <- read.csv(paste0(DateFile,"Table_for_SS3.csv")) %>%
mutate(TYPE = 'Abundance', Source = 'VAST',
lci = Estimate_metric_tons-SD_mt,
uci = Estimate_metric_tons+SD_mt) %>%
select(Year, Fleet, Estimate_metric_tons, SD_log, TYPE, Source, uci, lci ) #%>%
vastc$Fleet2 <- NA
for(i in 1:nrow(vastc)){
vastc$Fleet2[i] <- ifelse(vastc$Fleet[i] == "California_current",
"WC",
ifelse(vastc$Fleet[i] == "British_Columbia", "BC",
"AK"))
if(vastc$Fleet[i] == 'AllAreas')   vastc$Fleet2[i] <- "ALL"
}
fleetSel <- c(1:4,6,7,10,8,11,12)
custnames <- c(paste0('VAST ',c('California Current','British Columbia',
'Aleutian Islands', 'Gulf of Alaska','Eastern Bering Sea') ),
'AK Domestic Longline', "AK Gulf Trawl", 'BC Offshore Standardized','BC Synoptic Trawl','BC Trap Stratified',
'Triennial','WCGBTS')[fleetSel]
rbind(vastc,assc) %>%
filter(Fleet2 %in% c('WC','BC', 'AK')[1:3]) %>%
filter(Fleet %in% c("California_current","British_Columbia",
'Aleutian_Islands',"Gulf_of_Alaska",
"Eastern_Bering_Sea",
'AK_DOM_LL',"AK_GOA_TRW",'BC_OFFSHORE_STD',
"Filter_BCTrawl","Filter_StRS", "AKSHLF",  "NWCBO")[fleetSel]) %>%
filter(Year < 2019) %>%
# filter(Fleet %in% c("British_Columbia","Filter_BCTrawl")) %>%
ggplot(., aes(x = Year, y =Estimate_metric_tons, col = Fleet, linetype = Fleet)) +
theme_bw()+
theme(panel.grid = element_blank(),
legend.position = 'bottom',
legend.text = element_text(size = 12),
strip.text.x = element_text(
size = 16
)) +
scale_x_continuous(limits = c(1980,2018),
breaks = seq(1980,2020,10)) +
scale_color_manual( values = c(rep('blue',3), 'dodgerblue3',
cbbPalette),
labels = c(custnames)) +
scale_linetype_manual(values = c(rep('solid',4),
rep('dashed',40)),
labels = c(custnames)) +
labs(x = 'Year', y = 'Estimate (mt)', color = "", linetype = "",
title = '')+ #,
# subtitle = 'BC + WC have been multiplied by 1000') +
geom_line(lwd = 1) +
geom_ribbon(aes(ymin = lci, ymax = uci),
alpha = 0.15, col = 'grey',show.legend = FALSE) +
facet_wrap(~Fleet2, scales = 'free_y', ncol = 3)
ggsave(plot = last_plot(),
# file = paste0("./figures/",Sys.Date(),"_idx_comparison.png"),
file = paste0(DateFile,"/compare_all.png"),
height = 8, width = 12, unit='in',dpi = 320)
rm(list = ls())
load("C:/Users/mkapur/Dropbox/UW/sab-idx/runs/2020-01-23_nx=500_Triennial_WCGBTS_BCs_BCo_AK_DOM_LL_GOA_baseQ=AK_DOM_LL1980_2018/Data_Geostat.Rdata")
load("C:/Users/mkapur/Dropbox/UW/sab-idx/runs/2020-01-23_nx=500_Triennial_WCGBTS_BCs_BCo_AK_DOM_LL_GOA_baseQ=AK_DOM_LL1980_2018/Save_original.RData")
load("C:/Users/mkapur/Dropbox/UW/sab-idx/runs/2020-01-23_nx=500_Triennial_WCGBTS_BCs_BCo_AK_DOM_LL_GOA_baseQ=AK_DOM_LL1980_2018/TmbData.Rdata")
Save$Opt
# load(paste0(DateFile,"Save_original.Rdata"))
Opt <- Save$Opt
Report <- Save$Report
# Plot density, with help from THORSON re proj
# Report <- Save$Report
projargs_plot = "+proj=utm +datum=WGS84 +units=km +zone=3"
#projargs_plot = "+proj=moll +lon_0=-150 +datum=WGS84 +units=km"
#projargs_plot = "+proj=natearth +lon_0=-180 +datum=WGS84 +units=km"
plot_maps( plot_set=3, Report=Report, PlotDF=MapDetails_List[["PlotDF"]],
working_dir=DateFile, Year_Set=Year_Set,
projargs=projargs_plot,
country=c("united states of america","canada","mexico","russia",'japan'))
require(TMB)
#projargs_plot = "+proj=moll +lon_0=-150 +datum=WGS84 +units=km"
#projargs_plot = "+proj=natearth +lon_0=-180 +datum=WGS84 +units=km"
plot_maps( plot_set=3, Report=Report, PlotDF=MapDetails_List[["PlotDF"]],
working_dir=DateFile, Year_Set=Year_Set,
projargs=projargs_plot,
country=c("united states of america","canada","mexico","russia",'japan'))
library(VAST)
library(TMB)
library(dplyr)
library(tidyr)
library(reshape)
library(mapdata)
library(ggplot2)
#projargs_plot = "+proj=moll +lon_0=-150 +datum=WGS84 +units=km"
#projargs_plot = "+proj=natearth +lon_0=-180 +datum=WGS84 +units=km"
plot_maps( plot_set=3, Report=Report, PlotDF=MapDetails_List[["PlotDF"]],
working_dir=DateFile, Year_Set=Year_Set,
projargs=projargs_plot,
country=c("united states of america","canada","mexico","russia",'japan'))
install.packages('mapdata')
install.packages('reshape2')
require(mapdata)
#projargs_plot = "+proj=moll +lon_0=-150 +datum=WGS84 +units=km"
#projargs_plot = "+proj=natearth +lon_0=-180 +datum=WGS84 +units=km"
plot_maps( plot_set=3, Report=Report, PlotDF=MapDetails_List[["PlotDF"]],
working_dir=DateFile, Year_Set=Year_Set,
projargs=projargs_plot,
country=c("united states of america","canada","mexico","russia",'japan'))
??plot_maps
library(VAST)
install_github("james-thorson/VAST")
# Load package
library(VAST)
require(devtools)
install_github("james-thorson/VAST")
install.packages('yaml')
install_github("james-thorson/VAST")
# Load package
devtools::install_github("james-thorson/VAST")
require(yaml)
install.packages('yaml')
require(yaml)
